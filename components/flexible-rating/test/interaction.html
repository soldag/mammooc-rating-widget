<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>
  <script src="../../iron-test-helpers/mock-interactions.js"></script>
    <!-- import the element to test -->
    <link rel="import" href="../flexible-rating.html">
  </head>
  <body>
    <test-fixture id="editable">
      <template>
        <flexible-rating>
        </flexible-rating>
      </template>
    </test-fixture>
      <test-fixture id="read-only">
        <template>
          <flexible-rating value="3.6" disabled>
          </flexible-rating>
        </template>
      </test-fixture>
    <script>
      suite('<flexible-rating>', function() {
          /*suite('hovering', function() {
            var editableFixture, readOnlyFixture;
            setup(function() {
              editableFixture = fixture('editable');
              readOnlyFixture = fixture('read-only');
            });
            test("doesn't change anything for read-only elements", function() {
              assert.equal(readOnlyFixture.value, 3.6);
            });
            test('changes the displayed stars', function(done) {
              flush(function() {
                  var stars = Polymer.dom(editableFixture.root).querySelectorAll('.star-wrapper > span');
                  // Hover over third star
                  Polymer.dom(editableFixture.root).querySelector('.star-wrapper').dispatchEvent(new MouseEvent('mouseover'));
                  stars[2].dispatchEvent(new MouseEvent('mouseover'));
                  assert.equal(getComputedStyle(stars[0].children[0]).getPropertyValue('width'), "100%");
                  done();
              });
            });
            test("doesn't change the value", function() {

            });
          });*/
          suite('clicking', function() {
              var editableFixture, readOnlyFixture;
              setup(function() {
                editableFixture = fixture('editable');
                readOnlyFixture = fixture('read-only');
              });
              test("doesn't change the value for read-only elements", function(done) {
                  flush(function() {
                      var stars = Polymer.dom(readOnlyFixture.root).querySelectorAll('.star-wrapper > span');
                      MockInteractions.tap(stars[2]);
                      assert.equal(readOnlyFixture.value, 3.6);
                      done();
                  });
              });
              test("changes the value", function(done) {
                flush(function() {
                    var stars = Polymer.dom(editableFixture.root).querySelectorAll('.star-wrapper > span');
                    MockInteractions.tap(stars[2]);
                    assert.equal(editableFixture.value, 3);
                    done();
                });
              });
          })
        });
    </script>
  </body>
</html>
